# Gemini keyboard

![Gemini](images/gemini.jpg)

独自配列、分割40キーの35%キーボードです。

これまでに購入したり設計したりしてきたキーボードたちのアイデアを豊富に盛り込んだ、個人的に集大成のキーボードです。

# 特徴

こんな特徴があります:

キー数

- 数字行から上はバッサリカットして、コンパクトにしています
- 一方で、横方向にはしっかり12列あるので、Ctrl, Shift を一般的な配列と同様に小指に置くことができます。複雑なショートカットキー (Ctrl+Alt+? など) を変わらず使用できます

キー配置

- 左右に割れています
- 横にも縦にもズレた、独特の左右対称配列になっています。横ズレに慣れたタイピングの癖をそこまで矯正することなく、縦ズレのフィット感を享受できます
- 親指キーが他のキーから少し離して配置されていて、押しやすくなっています

ケース

- 打鍵感、打鍵音を意識した、独自のアクリル積層ケースになっています
- アクリルなので透明度も高く、LEDの光がよく通ります

その他

- 最大 52 発のフルカラー LED を取り付けられます
- 左右の LED 間は TRRS ケーブルを通して接続されており、オリジナルの発光パターンを比較的簡単に追加できます
- (代償として、 TRS ケーブルでの代用は不可となっています)

# 詳しい設計の経緯
## Matrix-staggered 配列

![matrix-staggered](images/stag.png)

縦にも横にもズレた Matrix-staggered 配列を採用しています。 Row-staggered で培ったタイピングの癖を無理に矯正することなく、 Columnar-staggered のようなフィット感を実現しようとしました。

横ズレについては、せがたさんの Answer40 で採用された V 字型の Semi-symmetric row-staggered を参考にしています (symmetric になっているので、若干変わってはいます)。私は b を左右両方の手で打つので、自然に左右に b を置きつつ、指の移動距離を最適化できるこの配列はしっくりきました。またこの配列を採用することで、左右とも自然に縦ズレを両立できています (通常の Row-staggered を採用する Alice などは、右手を折るのに苦労した跡が見られると思います)。分割キーボードなので左右対称だとデザイン的にも良く見えます (ぴったり重ねて収納できるのとか地味に大きいよね)。

縦ズレについては、所有している複数の国産 Columnar-staggered を打ち比べたり、撮影・トレスして俯瞰したりしながら、打鍵感に寄与する要素を考え、落とし所を探りました。分割 Row-staggered キーボードをハの字に置くと、正面から見て、たとえば j と k では k が遠くなります。これを一種の縦ズレととらえると、l, ; を適切に下げることで、 Columnar-staggered として自然なズレ方を実現できます: 右手で例えれば「 j, l あたりを基準として、 k がそれよりも奥にある。逆に ; は手前に来る」感じ。このアイデアをベースに、自分がいいところどりだと感じるズレ具合を、複数回試作して調整しました。

## 少し下がった親指キー

![thumbs](images/thumbs.png)

親指キーは他のキーたちより少し下がった位置についています。ふくさんの Claw44 の親指キーの配置が個人的にとても良く、なぜ良いと感じるかを同じく他のレイアウトのトレスと比べながら考えました。その結果「親指の付け根から親指の長さ分進んだところに、円状にキーが配置されていると自然に打てる」(結果だけ見ると当たり前ですが) ということが見えてきたので、この事実と見た目との落とし所として「親指キーを他のキーから少し離した上で (0.2u 分)、1.75u - 1.25u に分割して使う」に至りました。親指キーを3キー設けるパターンも検討してはいたのですが、3キー目は結構無理しないと押せなかったので、それよりは1キーの幅を広く取って個々人のスイートスポットで押しやすくなっている方が良いかな、という判断が含まれています。長めのキーを押した時のカポッて感じの音も好きです。

## 積層ケース

![density](images/density.png)

前作でも試した「ピチピチ積層ケース」のアイデアをベースに、自分好みの音・打鍵感になるようチューニングしました。ケースの中間層をただの外枠にするのでなく、部品と干渉するところだけに穴を開けて残り部分にはアクリルを行き渡らせることでケースの密度を上げ、質量を稼ぎつつ音の響く空間の広さを削減しています。

面白かったのは、空間をなくすほど響きが抑制されて落ち着いた音にはなるのですが、同時に音のピッチも上がっていくような感じがありました。そこで、うるさくならない範囲で適度に空洞を取る、という微調整をしました。感覚頼りになっているので、このあたりはまだ勉強が要りそうです。ネジの締め具合なども影響がありそうな気配があり、沼を感じています。

アクリルプレートによるプレートマウントですが、基板内部にスペーサーを立てる一般的なサンドイッチと比較して、プレートがケースの外周全体で支えられるので剛性感はやや高いと思います。とはいえ金属プレートほどでもないので、個人的にはちょうど良いです。

# ビルドガイド
## パーツ

- Gemini Kit
  - 基板 右手・左手各１枚
  - 底板２枚 (2mm)
  - ボトムプレート２枚 (3mm)
  - ローワーミドルフレーム 右手・左手各１枚 (2mm)
  - ミドルフレーム 上側・下側各２枚 (3mm)
  <!-- ミドルフレームの 2mm / 3mm は逆でもいい気がしている -->
  - ローワートッププレート２枚 (2mm)
  - トッププレート２枚 (3mm)
  - トップフレーム 厚・薄各２枚 (2mm / 3mm)
- MX 互換キースイッチ x40
- ダイオード 1N4148w x40
- TRRS ジャック MJ-4PP-9 x2
- 2 ピンタクトスイッチ x2
- コンスルー付き ProMicro x2 セット
- M2 ナット x20
- M2 ネジ 20mm x20 (プレートを全て使う場合)
- LED SK6812mini x52 (任意、半田付け難易度高めなので注意)

## ケースのカスタマイズについて

- 底板を省略すると、一部の電子部品がむき出しになってしまう代わりにキーボードの高さを 2mm 抑えることができます
- トップフレームは 2mm 厚、3mm 厚のものが付属します。両方使って 5mm としてもいいですし、片方あるいは両方を省略することもできます

一部のプレートを省略する場合は、それに合わせてネジの長さも調節してください。

## 組み立て
### Pro Micro の用意

もげ対策、ファームの書き込み、コンスルーの取り付けなどを済ませておきます。

コンスルーの向きは Helix と同様です (https://github.com/MakotoKurauchi/helix/blob/master/Doc/buildguide_jp.md#pro-micro)。

### TRRS ジャック、 LED の実装

![LEDs](images/leds.jpg)

LED を取り付ける場合、左手側の基板から先に取り付けてゆきます。コの字の印のあるところが LED の VCC になります。 LED の順序は次のようになっています：

- バックライト（穴に落として半田付けするもの） … Pro Micro に近い側の、一番上のキー（表から見ると左上）から横方向に進み、端まで来たら次の行の Pro Micro に近い側に戻る

- アンダーグロー（通常の表面実装） … Pro Micro に近い側の、上側から同様の順

Pro Micro を接続して点灯確認をしましょう。確認できたら右手も同様に実装してゆきますが、今回の基板では右手の LED も左手の Pro Micro で制御します。そのため右手の点灯確認には TRRS ケーブルでの接続が必要です。右手の LED も同様に Pro Micro に近い側から実装してゆきます。

### ダイオード、リセットスイッチの実装

ダイオードはコの字の印がカソード側（ダイオードの目印のついている側）です。実装できたら Pro Micro を接続し、ピンセットなどでスイッチの足をショートさせて、ちゃんとキー入力が行われるか動作確認しておきましょう。

### スイッチの実装

![switches](images/switches.jpg)

スイッチを半田付けしてしまうと、全てのスイッチをはがさない限りプレートを外すことができなくなります。ここまでの動作確認ができていない場合は、必ず動作確認してからスイッチにとりかかってください。

Pro Micro を外し、スイッチを実装します。基板にローワートッププレート、トッププレートをこの順に重ね、スイッチを奥まではめ込み、裏から半田付けします。 Pro Micro の裏にくるスイッチの足はカットしておきます（Pro Micro の個体によってはカットしなくてもちゃんと取り付けられることもありますが）。

スイッチの実装が終わったらまた Pro Micro を刺しておきます。

### ケースを組み立てる

![case](images/case.png)

下から

- 底板
- ボトムプレート
- ローワーミドルフレーム
- ミドルフレーム 上側・下側
- 実装済みの基板＆トッププレート
- 好みの枚数のトップフレーム

をこの順に重ね、ネジで貫通・ナットで留めます。ローワーミドルフレームには左右の別があるので注意してください。部品に干渉していなければ ok です。

仕上げにゴム足を貼り付ければ完成です。
